- pipeline: "Deploy to Staging"
  trigger_mode: "ON_EVERY_PUSH"
  ref_name: "master"
  ref_type: "BRANCH"
  target_site_url: "https://staging2.idfive.com/idfive-pattern-lab-starter/"
  actions:
    - action: "Execute: npm install"
      type: "BUILD"
      working_directory: "/buddy/source"
      docker_image_name: "library/node"
      docker_image_tag: "19.0.0"
      execute_commands:
        - "npm install"
      mount_filesystem_path: "/buddy/source"
      trigger_condition_paths:
        - "package.json"
        - "package-lock.json"
      shell: "BASH"
      trigger_condition: "ON_CHANGE_AT_PATH"
    - action: "Upload files to staging2 (Bruce)"
      type: "SFTP"
      input_type: "BUILD_ARTIFACTS"
      local_path: "/"
      remote_path: "/var/www/staging2.idfive.com/public_html/idfive-pattern-lab-starter"
      login: "idfive"
      host: "142.93.75.126"
      port: "22"
      env_key: "id_project"
      authentication_mode: "ENV_KEY"
      deployment_excludes:
        - "node_modules/"
        - "/source/"
